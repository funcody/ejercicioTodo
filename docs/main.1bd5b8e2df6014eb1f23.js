(()=>{"use strict";var a={};(()=>{a.d=(b,c)=>{for(var d in c)a.o(c,d)&&!a.o(b,d)&&Object.defineProperty(b,d,{enumerable:!0,get:c[d]})}})(),(()=>{a.o=(a,b)=>Object.prototype.hasOwnProperty.call(a,b)})();a.d({},{L:()=>n});class b{static fromJson({_tarea:a,_id:c,_completado:d,_creado:e}){const f=new b(a);return f._id=c,f._completado=d,f._creado=e,f}constructor(a){this._tarea=a,this._id=new Date().getTime(),this._completado=!1,this._creado=new Date}imprimir(){console.log(`${this._tarea} - ${this._id}`)}}const c=document.querySelector(".todo-list"),d=document.querySelector(".new-todo"),e=document.querySelector(".clear-completed"),f=document.querySelectorAll(".filtro"),g=document.querySelector(".todo-count"),h=document.querySelector(".filters"),i=(a)=>{const b=`<li class="${a._completado?"completed":""}" data-id="${a._id}">
                            <div class="view">
                                <input class="toggle" type="checkbox" ${a._completado?"checked":""}>
                                <label>${a._tarea}</label>
                                <button class="destroy"></button>
                            </div>
                            <input class="edit" value="Create a TodoMVC template">
                       </li>`,d=document.createElement("div");return d.innerHTML=b,c.append(d.firstElementChild),d.firstElementChild},j=(a)=>{const c=new b(`${a}`);return c},k=()=>{for(let a=c.children.length-1;0<=a;a--)c.removeChild(c.children[a])},l=(a)=>{f.forEach((a)=>a.classList.remove("selected"));const b=a.target;b.classList.add("selected")},m=()=>{const a=`<strong>${n.mostrarNumeroTodosPendientes()}</strong> pendiente(s)`;g.innerHTML=a};d.addEventListener("keyup",(a)=>{if(13===a.keyCode&&0<d.value.length){const a=j(d.value);n.nuevoTodo(a),i(a),d.value="",console.log(n)}m()}),c.addEventListener("click",(a)=>{const b=a.target.localName,d=a.target.parentElement.parentElement,e=parseInt(d.getAttribute("data-id"));b.includes("input")?(n.marcarCompletado(e),d.classList.toggle("completed"),console.log(n),f[1].classList.contains("selected")&&n.mostrarTodosPendientes(),f[2].classList.contains("selected")&&n.mostrarTodosCompletados()):b.includes("button")&&(c.removeChild(d),n.eliminarTodo(e)),m()}),e.addEventListener("click",()=>{0<c.children.length&&n.eliminarCompletados();for(let a=c.children.length-1;0<=a;a--){const b=c.children[a];b.classList.contains("completed")&&c.removeChild(b)}}),f[0].addEventListener("click",(a)=>{n.mostrarTodosTodos(),l(a)}),f[1].addEventListener("click",(a)=>{n.mostrarTodosPendientes(),l(a)}),f[2].addEventListener("click",(a)=>{n.mostrarTodosCompletados(),l(a)});const n=new class{constructor(){this.cargarLocalStorage()}nuevoTodo(a){this._todos.push(a),this.guardarLocalStorage()}eliminarTodo(a){this._todos=this._todos.filter((b)=>b._id!==a),this.guardarLocalStorage()}marcarCompletado(a){const b=this._todos.find((b)=>b._id===a);b._completado=!b._completado,this.guardarLocalStorage()}eliminarCompletados(){this._todos=this._todos.filter((a)=>!a._completado),this.guardarLocalStorage()}guardarLocalStorage(){localStorage.setItem("todo",JSON.stringify(this._todos))}cargarLocalStorage(){this._todos=localStorage.getItem("todo")?this._todos=JSON.parse(localStorage.getItem("todo")):[],this._todos=this._todos.map((a)=>b.fromJson(a))}mostrarTodosTodos(){k(),n._todos.forEach((a)=>i(a))}mostrarTodosPendientes(){const a=this._todos.filter((a)=>!0!==a._completado);k(),a.forEach((a)=>i(a))}mostrarTodosCompletados(){const a=this._todos.filter((a)=>!0===a._completado);k(),a.forEach((a)=>i(a))}mostrarNumeroTodosPendientes(){let a=0;return this._todos.forEach((b)=>{!0!==b._completado&&a++}),a}};n._todos.forEach((a)=>i(a)),m(),console.log(n)})();